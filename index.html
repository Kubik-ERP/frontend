<!doctype html>
<html lang="en" class="h-full bg-white">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./src/app/assets/images/app-icon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="google" content="notranslate">
  <title>Kubik POS</title>
  <style>
    /* Initial loading screen styles - shown before Vue loads */
    #initial-loader {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: white;
      font-family:
        system-ui,
        -apple-system,
        sans-serif;
    }

    @media (prefers-color-scheme: dark) {
      #initial-loader {
        background: #1a1a1a;
        color: white;
      }
    }

    .loader-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #e5e7eb;
      border-top: 4px solid #3b82f6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .loader-text {
      font-size: 1.125rem;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
    }

    @media (prefers-color-scheme: dark) {
      .loader-text {
        color: #e5e7eb;
      }
    }

    .loader-subtext {
      font-size: 0.875rem;
      color: #6b7280;
    }

    @media (prefers-color-scheme: dark) {
      .loader-subtext {
        color: #9ca3af;
      }
    }
  </style>
</head>

<body class="h-full">
  <!-- Initial loading screen - will be replaced by Vue -->
  <div id="initial-loader">
    <div style="margin-bottom: 2rem">
      <img src="/app-logo.png" alt="App Logo" style="height: 4rem; width: auto" onerror="this.style.display='none';" />
    </div>
    <div class="loader-spinner"></div>
    <div class="loader-text">Loading Application</div>
    <div class="loader-subtext">Please wait while we prepare everything for you...</div>
  </div>

  <main id="main-content" class="relative inset-0 z-0 w-full h-dvh"></main>

  <script type="module" src="/src/main.ts"></script>

  <script>
    // Hide initial loader once Vue app is mounted
    document.addEventListener('DOMContentLoaded', function () {
      const initialLoader = document.getElementById('initial-loader');

      // Check if Vue app has mounted by checking if main-content has children
      const checkVueMounted = setInterval(() => {
        const mainContent = document.getElementById('main-content');
        if (mainContent && mainContent.children.length > 0) {
          if (initialLoader) {
            initialLoader.style.display = 'none';
          }
          clearInterval(checkVueMounted);
        }
      }, 100);

      // Fallback - hide loader after maximum 10 seconds
      setTimeout(() => {
        if (initialLoader) {
          initialLoader.style.display = 'none';
        }
        clearInterval(checkVueMounted);
      }, 10000);
    });
  </script>
</body>

</html>
